@page "/generator"
@using WoS_Gen
@using WoS_Gen.Models

<PageTitle>Schedule Generator</PageTitle>

<section class="banner-image">
    <HeroSection 
        Title="Start Generating Below" 
        Paragraph="
                Start with filling in your input, then click the button to generate and 
                see your personalized workout Schedule!
            "
        ButtonText="Generate Now!"
        Visible="false"     
    />
</section>

<section class="container w-50 p-4 my-5">
    <EditForm Model="user" OnInvalidSubmit="HandleSubmit">
        <div class="row mb-3">
            <label for="name" class="col-sm-2 col-form-label">Fullname:</label>
            <div class="col-sm-10">
                <InputText id="name" @bind-Value="user.Name" class="form-control" required></InputText>
            </div>
        </div>
        <div class="row mb-3">
            <label for="email" class="col-sm-2 col-form-label">Email:</label>
            <div class="col-sm-10">
                <InputText id="email" @bind-Value="user.Email" class="form-control" type="email" required></InputText>
            </div>
        </div>
        <div class="row mb-3">
            <label for="goal" class="col-sm-2 col-form-label">Goal:</label>
            <div class="col-sm-10">
                <InputSelect @bind-Value="user.WorkoutGoal">
                    <option value="Gym">Gym</option>
                    <option value="Home">Home</option>
                </InputSelect>
            </div>
        </div>
        <div class="d-flex flex-column justify-content-center">
            <button type="submit" @onclick="HandleSubmit" class="btn btn-primary">Create Schedule</button>
        </div>
    </EditForm>
</section>

@foreach (var user in users)
{
    <p>@user.Name</p>
    <p>@user.Email</p>
    <p>@user.WorkoutGoal</p>
}

<section>
    <Schedule />
</section>

@code {
    static List<User> users = new List<User>
    {
        new User
        {
            Name = "",
            Email = "",
            WorkoutGoal = "",
            Location = "",
        }
    };

    User user = new User();
    bool isNew = true;

    private void HandleSubmit()
    {
        if (isNew)
        {
            users.Add(user);
            CreateUser();
        }
    }

    private void CreateUser()
    {
        user = new User();
        isNew = true;
    }
}
